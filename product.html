<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>City Hoodie ‚Äì Journey Apparel</title>
    <link rel="stylesheet" href="styles.css" />
    <style id="desktop-overrides">
      @media (min-width: 1024px) {
        /* Hide mobile hero overlay, show desktop version */
        .hero-overlay.mobile-only {
          display: none !important;
        }
        #hero-overlay-desktop {
          display: flex !important;
        }
        /* New Arrivals: 5x1 on desktop */
        .arrivals-carousel .carousel-row.bottom {
          display: none !important;
        }
        .arrivals-carousel .carousel-track {
          grid-auto-columns: calc((100% - 64px) / 5) !important; /* 5 across */
          gap: 16px !important;
          justify-content: start !important;
        }
        /* Best Sellers: keep 4-up */
        #best-sellers .carousel-track {
          grid-auto-columns: 25% !important;
        }
        /* Category row: 4-up ‚Äî fill width exactly on desktop */
        #categories .category-carousel .carousel-track {
          grid-template-columns: repeat(4, 1fr) !important;
          grid-auto-columns: unset !important;
          justify-content: stretch !important;
          overflow-x: hidden !important;
        }
        /* Desktop-only: Category padding and sizing */
        #categories {
          padding-left: 16px !important;
          padding-right: 16px !important;
        }
        #categories .category-carousel {
          padding-left: 16px !important;
          padding-right: 16px !important;
        }
        #categories .category-carousel .carousel-track.panels {
          gap: 0.5% !important;
        }
        #categories .category-carousel .panel img {
          height: clamp(380px, 36vw, 620px) !important;
        }

        /* Desktop: stabilize header layering and layout */
        header.header {
          background: #fff !important;
          position: sticky !important;
          top: 0;
          left: 0;
          right: 0;
          z-index: 500 !important;
          box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);
        }
        header.header .header-inner {
          display: flex !important;
          align-items: center !important;
          justify-content: space-between !important;
          padding-left: 16px !important;
          padding-right: 16px !important;
        }
        header.header .nav-left {
          display: flex;
          align-items: center;
          gap: 16px;
        }
        header.header .menu-toggle {
          display: none !important;
        }
        header.header .nav {
          display: flex !important;
          gap: 14px;
          overflow: visible !important;
        }
        header.header .nav .header-item {
          padding: 8px 6px !important;
          color: #111 !important;
          text-decoration: none !important;
        }
        header.header .nav .header-item .mega {
          z-index: 600 !important;
          top: calc(100% + 12px) !important;
        }
        header.header .nav .header-item .shop-hamburger {
          display: inline-flex !important;
        }

        /* Desktop: premium mega menu */
        header.header .nav .header-item:hover .mega,
        header.header .nav .header-item:focus-within .mega {
          display: block !important;
        }

        /* Back in Stock: desktop split images */
        #back-in-stock-promo .split-desktop {
          display: grid !important;
          grid-template-columns: 1fr 1fr;
          gap: 0;
          position: relative;
          height: 78vh !important;
          overflow: hidden !important;
        }
        #back-in-stock-promo .video-mobile {
          display: none !important;
        }
        .shop-hamburger {
          display: inline-flex !important;
        }
      }
    </style>

    <style id="desktop-product-overrides">
      @media (min-width: 1024px) {
        /* Side-by-side product layout: images left, details right */
        main.container.section.product {
          display: grid !important;
          grid-template-columns: 1.1fr 0.9fr !important;
          align-items: start !important;
          gap: 24px !important;
          padding-top: 16px !important;
          /* Ensure full-bleed main container on desktop */
          max-width: none !important;
          width: 100% !important;
          margin-left: 0 !important;
          margin-right: 0 !important;
          padding-left: 0 !important;
          padding-right: 0 !important;
        }
        .p-gallery {
          margin: 0 !important;
        }
        .p-details {
          background: transparent !important;
          border: 0 !important;
          padding: 0 48px !important; /* further increase equal gutters to narrow column */
          margin-right: 0 !important; /* ensure symmetry; no extra right-only margin */
        }
        /* Desktop: place price under product title */
        .p-details > .row:first-child {
          flex-direction: column !important;
          align-items: flex-start !important;
          justify-content: flex-start !important;
          gap: 4px !important;
        }
        .p-details > .row:first-child .p-price {
          align-self: flex-start !important;
          margin-top: 2px !important;
        }

        /* Hide the inline (right-column) versions of these sections on desktop */
        .p-details #you-also-viewed,
        .p-details #featured-collection,
        .p-details section[aria-label="Join Journey"] {
          display: none !important;
        }

        /* Recently Viewed & Best Sellers: 4-up horizontal on desktop */
        .product .carousel-track.mobile-2x1 {
          display: grid !important;
          grid-template-columns: repeat(
            4,
            1fr
          ) !important; /* 4x1 layout on desktop */
          gap: 16px !important;
          overflow: visible !important;
        }
      }
    </style>
  </head>
  <body style="margin: 0; overflow-x: hidden">
    <div
      class="announcement upper"
      style="position: sticky; top: 0; left: 0; right: 0; text-align: center"
    >
      Free Shipping On Orders Over $100
    </div>
    <header class="header" style="top: 0; left: 0; right: 0">
      <div
        class="container header-inner"
        style="
          max-width: none;
          width: 100%;
          padding-left: 0;
          padding-right: 16px;
        "
      >
        <div class="nav-left row">
          <button
            class="menu-toggle"
            aria-label="Open menu"
            style="
              background: transparent;
              border: none;
              padding: 8px;
              display: inline-flex;
              flex-direction: column;
              gap: 4px;
              align-items: center;
              justify-content: center;
              width: 36px;
              height: 36px;
              border-radius: 0;
              box-shadow: none;
            "
          >
            <span
              style="
                display: block;
                width: 22px;
                height: 2px;
                background: #000;
                border-radius: 1px;
              "
            ></span>
            <span
              style="
                display: block;
                width: 22px;
                height: 2px;
                background: #000;
                border-radius: 1px;
              "
            ></span>
            <span
              style="
                display: block;
                width: 22px;
                height: 2px;
                background: #000;
                border-radius: 1px;
              "
            ></span>
          </button>
          <nav class="nav" aria-label="Primary">
            <a
              href="#"
              class="header-item"
              aria-haspopup="true"
              aria-expanded="false"
              style="
                position: relative;
                display: inline-flex;
                align-items: center;
              "
              >Shop
              <span
                class="shop-hamburger"
                onclick="if(window.innerWidth>=1024){event.preventDefault();event.stopPropagation();var t=document.querySelector('.menu-toggle');if(t)t.click();}"
                style="
                  display: none;
                  order: -1;
                  margin-right: 14px;
                  margin-left: 0;
                  vertical-align: middle;
                  cursor: pointer;
                  user-select: none;
                  width: 18px;
                  height: 12px;
                  align-items: center;
                  justify-content: space-between;
                  flex-direction: column;
                "
              >
                <span
                  style="
                    display: block;
                    width: 18px;
                    height: 2px;
                    background: #000;
                  "
                ></span>
                <span
                  style="
                    display: block;
                    width: 18px;
                    height: 2px;
                    background: #000;
                  "
                ></span>
                <span
                  style="
                    display: block;
                    width: 18px;
                    height: 2px;
                    background: #000;
                  "
                ></span>
              </span>
              <div
                class="mega"
                role="dialog"
                aria-label="Mega menu"
                style="
                  display: none;
                  position: absolute;
                  left: 0;
                  top: calc(100% + 8px);
                  background: #fff;
                  border: 1px solid rgba(0, 0, 0, 0.08);
                  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
                  padding: 18px 22px;
                  border-radius: 8px;
                  width: max-content;
                  min-width: 560px;
                  z-index: 200;
                "
              >
                <div class="mega-grid container">
                  <div>
                    <h4 class="upper">Shop by Category</h4>
                    <div class="links">
                      <a href="collection.html">Tops</a>
                      <a href="collection.html">Hoodies</a>
                      <a href="collection.html">Bottoms</a>
                      <a href="collection.html?category=hats">Hats</a>
                    </div>
                  </div>
                  <div>
                    <h4 class="upper">Shop by Collection</h4>
                    <div class="links">
                      <a
                        href="collection.html?collection=journeys-x-leyos-collection"
                        >Journeys X Leyos Collection</a
                      >
                      <a href="collection.html">AeroLite</a>
                      <a href="collection.html">Journey</a>
                      <a href="collection.html">Core365</a>
                      <a href="collection.html">Black Label</a>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            <a
              href="collection.html?collection=best-sellers"
              class="header-item"
              >Best Sellers</a
            >
            <a href="collection.html?section=new-arrivals" class="header-item"
              >New Arrivals</a
            >
            <a
              href="collection.html?collection=journeys-x-leyos-collection"
              class="header-item"
              >Journeys X Leyos</a
            >
          </nav>
        </div>
        <h1 class="logo">
          <a
            href="index.html"
            aria-label="Journeys Apparel Home"
            style="font-size: 0.94em; letter-spacing: 1.8px"
            >JOURNEYS</a
          >
        </h1>
        <!-- Search Overlay -->
        <div
          id="site-search"
          style="
            position: fixed;
            inset: 0 0 auto 0;
            top: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            z-index: 1000;
            display: none;
            padding: 12px 16px;
          "
        >
          <form
            id="site-search-form"
            style="max-width: 800px; margin: 0 auto; display: flex; gap: 8px"
          >
            <input
              id="site-search-input"
              type="search"
              placeholder="Search pages or sections (e.g., New Arrivals, Best Sellers, Pair It With, Cart)"
              style="
                flex: 1;
                padding: 12px;
                border-radius: 8px;
                border: 1px solid #ddd;
                font-size: 16px;
                background: #fff;
              "
            />
            <button
              type="submit"
              style="
                padding: 12px 16px;
                border-radius: 8px;
                border: 1px solid #ddd;
                background: #fff;
                font-weight: 600;
                cursor: pointer;
              "
            >
              Go
            </button>
            <button
              type="button"
              id="site-search-close"
              style="
                padding: 12px 14px;
                border-radius: 8px;
                border: 1px solid #ddd;
                background: #fff;
                cursor: pointer;
              "
            >
              √ó
            </button>
          </form>
        </div>

        <div class="nav-right">
          <button class="icon-btn" aria-label="Account" style="order: 1">
            üë§
          </button>
          <button class="icon-btn" aria-label="Search" style="order: 2">
            üîç
          </button>
          <a class="icon-btn" aria-label="Cart" href="#" style="order: 3">üõí</a>
        </div>
      </div>
    </header>

    <style>
      /* Desktop-only: center the JOURNEYS logo perfectly and ensure mega can overflow */
      @media (min-width: 1024px) {
        header.header .header-inner {
          position: relative !important;
          padding-left: 16px !important;
          padding-right: 16px !important;
        }
        header.header .logo {
          position: absolute !important;
          left: 50% !important;
          transform: translateX(-50%) !important;
          margin: 0 !important;
        }
        header.header .nav {
          overflow: visible !important;
          position: relative !important;
          z-index: 20 !important; /* ensure nav is above logo for clicks */
        }
        header.header .nav .header-item {
          position: relative !important;
        }
        header.header .nav .header-item .mega {
          z-index: 200;
        }
        header.header .logo {
          z-index: 1 !important; /* keep logo below nav so Shop is clickable */
        }
      }
    </style>

    <!-- Mobile Drawer & Overlay -->
    <div id="drawer-overlay" class="drawer-overlay" aria-hidden="true"></div>
    <aside
      id="mobile-drawer"
      class="drawer"
      aria-hidden="true"
      aria-label="Mobile navigation drawer"
    >
      <div class="drawer-top">
        <button class="drawer-close" aria-label="Close menu">√ó</button>
        <a href="#" class="cart-link" aria-label="Cart"
          >Cart <span id="cart-count">0</span> üõí</a
        >
      </div>
      <nav class="drawer-nav" aria-label="Mobile navigation">
        <a href="collection.html?section=new-arrivals" class="row-item"
          >New Arrivals</a
        >
        <a href="collection.html?section=back-in-stock" class="row-item"
          >Back in Stock</a
        >
        <a href="collection.html?section=shop-all" class="row-item">Shop All</a>

        <button class="row-item accordion" data-accordion aria-expanded="false">
          Shop by Category <span class="chev">‚Ä∫</span>
        </button>
        <div class="sub">
          <a href="collection.html?category=tees">Tees</a>
          <a href="collection.html?category=hoodies">Hoodies</a>
          <a href="collection.html?category=shorts">Shorts</a>
          <a href="collection.html?category=hats">Hats</a>
        </div>

        <button class="row-item accordion" data-accordion aria-expanded="false">
          Shop by Collection <span class="chev">‚Ä∫</span>
        </button>
        <div class="sub">
          <a href="collection.html?collection=best-sellers">Best Sellers</a>
          <a href="collection.html?collection=journeys-x-leyos-collection"
            >Journeys X Leyos Collection</a
          >
        </div>

        <a href="#" class="row-item">Journey Sign Up</a>

        <button class="row-item accordion" data-accordion aria-expanded="false">
          Support & Contact <span class="chev">‚Ä∫</span>
        </button>
        <div class="sub">
          <a href="returns.html">Exchanges & Returns</a>
          <a href="shipping.html">Shipping</a>
          <a href="policies.html">Policies</a>
          <a href="contact.html">Contact</a>
          <a href="about.html">About</a>
        </div>
      </nav>

      <div class="drawer-bottom">
        <a href="#" class="row-item">üë§ Log in / Create Account</a>
      </div>
    </aside>

    <main
      class="container section product"
      style="
        padding-top: 0;
        max-width: none;
        width: 100%;
        margin: 0;
        padding-left: 0;
        padding-right: 0;
      "
    >
      <section class="gallery p-gallery" style="padding: 0; margin: 0">
        <div
          class="gallery-main"
          style="
            border-radius: 0;
            background: transparent;
            margin: 0;
            padding: 0;
          "
        >
          <div class="carousel hero-carousel" style="position: relative">
            <button
              class="ctrl prev"
              aria-label="Previous"
              onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
              onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
              onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
              onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
              style="
                position: absolute;
                top: 50%;
                left: 8px;
                transform: translateY(-50%);
                display: flex;
                align-items: center;
                justify-content: center;
                background: transparent;
                border: 1px solid transparent;
                padding: 0;
                color: #fff;
                font-size: 20px;
                width: 36px;
                height: 36px;
                line-height: 1;
                border-radius: 50%;
                z-index: 2;
              "
            >
              <span
                style="
                  display: inline-block;
                  color: #fff;
                  transition: transform 120ms ease;
                "
                >‚Äπ</span
              >
            </button>
            <div
              id="hero-track"
              class="carousel-track"
              style="
                display: grid;
                grid-auto-flow: column;
                grid-auto-columns: 100%;
                gap: 0;
                overflow-x: auto;
                scroll-snap-type: x mandatory;
                padding: 0;
                scrollbar-width: none;
                -ms-overflow-style: none;
              "
            >
              <img
                src="https://images.unsplash.com/photo-1547949003-9792a18a2601?q=80&w=1200&auto=format&fit=crop"
                alt="City Hoodie"
                loading="eager"
                style="
                  width: 100%;
                  height: 100%;
                  border-radius: 0;
                  object-fit: cover;
                  scroll-snap-align: center;
                  pointer-events: none;
                  transition: none;
                "
              />
              <img
                src="https://images.unsplash.com/photo-1547949003-9792a18a2601?q=80&w=1200&auto=format&fit=crop"
                alt="City Hoodie alt 1"
                loading="lazy"
                onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1200&auto=format&fit=crop';"
                style="
                  width: 100%;
                  height: 100%;
                  border-radius: 0;
                  object-fit: cover;
                  scroll-snap-align: center;
                  pointer-events: none;
                  transition: none;
                "
              />
              <img
                src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=800&auto=format&fit=crop"
                alt="City Hoodie alt 2"
                style="
                  width: 100%;
                  height: 100%;
                  border-radius: 0;
                  object-fit: cover;
                  scroll-snap-align: center;
                  pointer-events: none;
                  transition: none;
                "
              />
            </div>
            <div
              id="hero-dots"
              style="
                position: absolute;
                left: 50%;
                bottom: 10px;
                transform: translateX(-50%);
                display: flex;
                gap: 8px;
                align-items: center;
                justify-content: center;
              "
            ></div>

            <button
              class="ctrl next"
              aria-label="Next"
              onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
              onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
              onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
              onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
              style="
                position: absolute;
                top: 50%;
                right: 8px;
                transform: translateY(-50%);
                display: flex;
                align-items: center;
                justify-content: center;
                background: transparent;
                border: 1px solid transparent;
                padding: 0;
                color: #fff;
                font-size: 20px;
                width: 36px;
                height: 36px;
                line-height: 1;
                border-radius: 50%;
                z-index: 2;
              "
            >
              <span
                style="
                  display: inline-block;
                  color: #fff;
                  transition: transform 120ms ease;
                "
                >‚Ä∫</span
              >
            </button>
          </div>
        </div>
      </section>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          var track = document.getElementById("hero-track");
          if (!track) return;

          // ensure no gaps and no rounding
          track.style.gap = "0px";
          track.style.padding = "0";

          function sizeHero() {
            var header = document.querySelector(".header-inner");
            var announce = document.querySelector(".announcement");
            var headerH =
              (header ? header.offsetHeight : 64) +
              (announce && getComputedStyle(announce).position !== "static"
                ? announce.offsetHeight || 0
                : 0);
            var isDesktop = window.innerWidth >= 1024;
            var factor = isDesktop
              ? 0.78
              : 0.55; /* make desktop gallery notably taller */
            var minH = isDesktop ? 520 : 280;
            var h = Math.max(
              minH,
              Math.round((window.innerHeight - headerH) * factor)
            );
            track.style.height = h + "px";
            Array.from(track.querySelectorAll("img")).forEach(function (img) {
              img.style.height = h + "px";
              img.style.width = "100%";
              img.style.objectFit = "cover";
              img.style.borderRadius = "0";
              img.style.pointerEvents = "none"; // disable hover effects on images
              img.style.transition = "none";
            });
          }
          sizeHero();
          window.addEventListener("resize", sizeHero);
          window.addEventListener("load", sizeHero);
          window.addEventListener("orientationchange", sizeHero);
          (function () {
            var ticking = false;
            window.addEventListener(
              "scroll",
              function () {
                if (!ticking) {
                  ticking = true;
                  requestAnimationFrame(function () {
                    sizeHero();
                    ticking = false;
                  });
                }
              },
              { passive: true }
            );
            if (window.ResizeObserver) {
              var ro = new ResizeObserver(function () {
                sizeHero();
              });
              var h = document.querySelector(".header-inner");
              var a = document.querySelector(".announcement");
              h && ro.observe(h);
              a && ro.observe(a);
            }
          })();

          // Build pagination dots and sync active state
          var imgs = Array.from(track.querySelectorAll("img"));
          var dotsWrap = document.getElementById("hero-dots");
          if (dotsWrap) {
            dotsWrap.innerHTML = "";
            imgs.forEach(function (_, i) {
              var dot = document.createElement("span");
              dot.setAttribute("data-idx", i);
              dot.style.cssText =
                "width:8px;height:8px;border-radius:50%;background:#c7c7c7;display:inline-block;transition:background .2s;";
              dot.addEventListener("click", function () {
                var el = imgs[i];
                el &&
                  track.scrollTo({ left: el.offsetLeft, behavior: "smooth" });
              });
              dotsWrap.appendChild(dot);
            });
          }

          function setActive() {
            var mid = track.scrollLeft + track.clientWidth / 2;
            var nearest = 0,
              dist = Infinity;
            imgs.forEach(function (img, i) {
              var center = img.offsetLeft + img.offsetWidth / 2;
              var d = Math.abs(center - mid);
              if (d < dist) {
                dist = d;
                nearest = i;
              }
            });
            if (dotsWrap) {
              Array.from(dotsWrap.children).forEach(function (dot, i) {
                dot.style.background = i === nearest ? "#222" : "#c7c7c7";
              });
            }
          }

          setActive();
          track.addEventListener(
            "scroll",
            function () {
              requestAnimationFrame(setActive);
            },
            { passive: true }
          );
        });
      </script>

      <section
        class="p-details"
        style="
          padding: 12px 16px;
          background: #f2f2f2;
          border-top: 1px solid #e5e5e5;
          border-bottom: 1px solid #e5e5e5;
        "
      >
        <div
          class="row"
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
          "
        >
          <h1
            id="product-title"
            style="
              margin: 0;
              font-size: 16px;
              font-weight: 600;
              letter-spacing: 0.2px;
              color: #111;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            "
          >
            City Hoodie
          </h1>
          <div
            class="p-price"
            style="font-weight: 400; font-size: 16px; color: #111"
          >
            $98
          </div>
        </div>
        <div
          class="installments"
          style="margin-top: 6px; font-size: 13px; color: #666"
        >
          4 interest-free payments with Afterpay
        </div>
        <div
          aria-hidden="true"
          style="height: 1px; background: #c7c7c7; margin: 12px 0; width: 100%"
        ></div>

        <div
          class="row mt-16"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-top: 12px;
          "
        >
          <div class="upper" style="font-weight: 800; font-size: 12px">
            Select Size
          </div>
          <a
            href="#"
            id="size-guide-open"
            class="upper"
            style="
              font-size: 11px;
              color: #888;
              text-decoration: underline;
              cursor: pointer;
            "
            >Size Guide</a
          >
        </div>
        <div
          class="size-grid"
          id="size-grid"
          style="margin-top: 8px; margin-bottom: 12px"
        >
          <button class="size" aria-pressed="true">XXS</button>
          <button class="size">XS</button>
          <button class="size">S</button>
          <button class="size">M</button>
          <button class="size">L</button>
          <button class="size">XL</button>
          <button class="size">2XL</button>
          <button class="size">3XL</button>
        </div>

        <div
          class="row cta-row"
          style="
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-top: 12px;
          "
        >
          <button
            class="btn"
            style="
              flex: 1;
              width: 100%;
              background: #000;
              color: #fff;
              border: none;
              padding: 12px;
              border-radius: 8px;
              font-weight: 600;
              font-size: 14px;
            "
          >
            Add to Cart
          </button>
        </div>
        <!-- <div
          class="fit-note"
          style="
            font-size: 12px;
            color: #666;
            margin-top: 10px;
            line-height: 1.4;
          "
        >
          Runs large ‚Äì consider going 1‚Äì2 sizes down.
        </div> -->

        <div
          class="row mt-8 sp-row"
          style="
            display: flex;
            justify-content: center;
            text-align: center;
            margin-top: 8px;
          "
        >
          <button
            class="btn sp"
            style="
              width: 100%;
              background: #5a31f4;
              color: #fff;
              border: none;
              padding: 12px;
              border-radius: 8px;
              font-weight: 600;
              font-size: 14px;
            "
          >
            Buy with Paypal
          </button>
        </div>
        <div
          class="mt-8 more-pay"
          style="font-size: 12px; text-align: center; margin-top: 8px"
        >
          <a
            href="#"
            class="muted"
            style="text-decoration: underline; color: #666"
            >More payment options</a
          >
        </div>

        <div
          class="collapsible mt-16"
          style="margin-top: 16px; border-top: 1px solid #ddd"
        >
          <button
            aria-expanded="false"
            style="
              width: 100%;
              text-align: center;
              padding: 12px 0;
              background: none;
              border: 0;
              font-weight: 700;

              font-size: 14px;
              cursor: pointer;
            "
          >
            Details ‚ñº
          </button>
          <div
            class="content"
            style="
              height: 0;
              overflow: hidden;
              transition: height 0.25s ease;
              padding: 0;
            "
          >
            <div
              style="
                padding: 12px 0;
                color: #666;
                font-size: 14px;
                line-height: 1.4;
              "
            >
              Ultra-light ripstop with windproof finish. Secure zip pockets.
              True to size.
            </div>
          </div>
        </div>
        <div
          class="collapsible"
          style="border-top: 1px solid #ddd; border-bottom: 1px solid #ddd"
        >
          <button
            aria-expanded="false"
            style="
              width: 100%;
              text-align: center;
              padding: 12px 0;
              background: none;
              border: 0;
              font-weight: 700;
              font-size: 14px;
              cursor: pointer;
            "
          >
            Shipping & Returns ‚ñº
          </button>
          <div
            class="content"
            style="
              height: 0;
              overflow: hidden;
              transition: height 0.25s ease;
              padding: 0;
            "
          >
            <div
              style="
                padding: 12px 0;
                color: #666;
                font-size: 14px;
                line-height: 1.4;
              "
            >
              Free shipping over $75. 30-day free returns. Duties included.
            </div>
          </div>
        </div>

        <div
          class="mt-32"
          id="pair-it-with"
          style="margin-top: 32px; display: none"
        >
          <div
            class="upper center"
            style="
              font-weight: 800;
              text-align: center;
              font-size: 16px;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            "
          >
            Pair It With
          </div>
          <div class="carousel mt-16" style="margin-top: 16px">
            <div
              class="carousel-row"
              style="display: flex; align-items: center; gap: 2px"
            >
              <button
                class="ctrl prev"
                aria-label="Previous"
                style="
                  position: absolute;
                  top: 50%;
                  left: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  background: transparent;
                  border: 0;
                  padding: 0;
                  color: #fff;
                  font-size: 28px;
                  line-height: 1;
                  z-index: 2;
                "
              >
                ‚Äπ
              </button>
              <div
                class="carousel-track mobile-2x1"
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 12px;
                  flex: 1;
                "
              >
                <article
                  class="card"
                  data-href="product.html?slug=aero-jogger"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1520975922324-c2e5a62b2398?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Jogger"
                      loading="lazy"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FRNTNR 4" BIKE SHORT - SCARLET</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$79.00 AUD</span
                    >
                  </div>
                </article>
                <article
                  class="card"
                  data-href="product.html?slug=studio-tank"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1542296332-2e4473faf563?q=80&w=800&auto=format&fit=crop"
                      alt="Studio Tank"
                      loading="lazy"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FRNTNR BAGGY DENIM - BLACK</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$149.00 AUD</span
                    >
                  </div>
                </article>
              </div>
              <button
                class="ctrl next"
                aria-label="Next"
                style="
                  position: absolute;
                  top: 50%;
                  right: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  background: transparent;
                  border: 0;
                  padding: 0;
                  color: #fff;
                  font-size: 28px;
                  line-height: 1;
                  z-index: 2;
                "
              >
                ‚Ä∫
              </button>
            </div>
          </div>
        </div>

        <div
          class="mt-32"
          id="you-also-viewed"
          style="margin-top: 48px; padding: 0"
        >
          <div
            class="upper center"
            style="
              font-weight: 800;
              text-align: center;
              font-size: 16px;
              text-transform: uppercase;
              letter-spacing: 0.5px;
              margin-bottom: 16px;
            "
          >
            RECENTLY VIEWED
          </div>
          <div
            class="carousel mt-16"
            style="margin-top: 16px; margin-left: -16px; margin-right: -16px"
          >
            <div
              class="carousel-row"
              style="display: flex; align-items: center; gap: 2px"
            >
              <button
                class="ctrl prev"
                aria-label="Previous"
                onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
                onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
                onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
                onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
                onclick="(function(b){var r=b.parentElement;var t=r&&r.querySelector('.carousel-track');if(!t)return;var f=t.children[0];var s=0;if(f){var rect=f.getBoundingClientRect();var st=getComputedStyle(t);var g=parseFloat(st.columnGap||st.gap||0)||0;s=(rect.width+g)*2;}else{s=t.clientWidth;}t.scrollBy({left:-s,behavior:'smooth'});})(this)"
                style="
                  position: absolute;
                  top: 50%;
                  left: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  align-items: center;
                  justify-content: center;
                  background: transparent;
                  border: 1px solid transparent;
                  padding: 0;
                  color: #fff;
                  font-size: 20px;
                  width: 36px;
                  height: 36px;
                  line-height: 1;
                  border-radius: 50%;
                  cursor: pointer;
                  z-index: 2;
                "
              >
                ‚Äπ
              </button>
              <div
                class="carousel-track mobile-2x1"
                style="
                  display: grid;
                  grid-auto-flow: column;
                  grid-auto-columns: 50%;
                  gap: 12px;
                  overflow-x: auto;
                  overflow-y: hidden;
                  scroll-snap-type: x mandatory;
                  -webkit-overflow-scrolling: touch;
                  scroll-padding-left: 0;
                  scroll-padding-right: 0;
                  flex: 1;
                "
              >
                <article
                  class="card"
                  data-href="product.html?slug=aero-jogger"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1520975922324-c2e5a62b2398?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Jogger"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1535530992830-e25d07cfa780?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Jogger - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >ON FIRE TEE - BLACK FIRE</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$99.00 AUD</span
                    >
                  </div>
                </article>
                <article
                  class="card"
                  data-href="product.html?slug=aero-tee"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Tee"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1528701800489-20be0b02f47e?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Tee - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >HERITAGE TEE - WHITE</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$89.00 AUD</span
                    >
                  </div>
                </article>
              </div>
              <button
                class="ctrl next"
                aria-label="Next"
                onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
                onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
                onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
                onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
                onclick="(function(b){var r=b.parentElement;var t=r&&r.querySelector('.carousel-track');if(!t)return;var f=t.children[0];var s=0;if(f){var rect=f.getBoundingClientRect();var st=getComputedStyle(t);var g=parseFloat(st.columnGap||st.gap||0)||0;s=(rect.width+g)*2;}else{s=t.clientWidth;}t.scrollBy({left:s,behavior:'smooth'});})(this)"
                style="
                  position: absolute;
                  top: 50%;
                  right: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  align-items: center;
                  justify-content: center;
                  background: transparent;
                  border: 1px solid transparent;
                  padding: 0;
                  color: #fff;
                  font-size: 20px;
                  width: 36px;
                  height: 36px;
                  line-height: 1;
                  border-radius: 50%;
                  cursor: pointer;
                  z-index: 2;
                "
              >
                ‚Ä∫
              </button>
            </div>
          </div>
        </div>

        <div
          class="mt-32"
          id="featured-collection"
          style="margin-top: 48px; padding: 0"
        >
          <div
            class="upper center"
            style="
              font-weight: 800;
              text-align: center;
              font-size: 16px;
              text-transform: uppercase;
              letter-spacing: 0.5px;
              margin-bottom: 16px;
            "
          >
            BEST SELLERS
          </div>
          <div
            class="carousel mt-16"
            style="margin-top: 16px; margin-left: -16px; margin-right: -16px"
          >
            <div
              class="carousel-row"
              style="display: flex; align-items: center; gap: 2px"
            >
              <button
                class="ctrl prev"
                aria-label="Previous"
                onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
                onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
                onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
                onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
                onclick="(function(b){var r=b.parentElement;var t=r&&r.querySelector('.carousel-track');if(!t)return;var f=t.children[0];var s=0;if(f){var rect=f.getBoundingClientRect();var st=getComputedStyle(t);var g=parseFloat(st.columnGap||st.gap||0)||0;s=(rect.width+g)*2;}else{s=t.clientWidth;}t.scrollBy({left:-s,behavior:'smooth'});})(this)"
                style="
                  position: absolute;
                  top: 50%;
                  left: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  align-items: center;
                  justify-content: center;
                  background: transparent;
                  border: 1px solid transparent;
                  padding: 0;
                  color: #fff;
                  font-size: 20px;
                  width: 36px;
                  height: 36px;
                  line-height: 1;
                  border-radius: 50%;
                  cursor: pointer;
                  z-index: 2;
                "
              >
                ‚Äπ
              </button>
              <div
                class="carousel-track mobile-2x1"
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 12px;
                  flex: 1; /* Best Sellers stays 2-up, no horizontal scroll */
                "
              >
                <article
                  class="card"
                  data-href="product.html?slug=city-hoodie"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1547949003-9792a18a2601?q=80&w=800&auto=format&fit=crop"
                      alt="City Hoodie"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=800&auto=format&fit=crop"
                      alt="City Hoodie - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FEATURED ITEM 1</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$98.00 AUD</span
                    >
                  </div>
                </article>
                <article
                  class="card"
                  data-href="product.html?slug=aero-tee"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Tee"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1528701800489-20be0b02f47e?q=80&w=800&auto=format&fit=crop"
                      alt="Aero Tee - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FEATURED ITEM 2</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$48.00 AUD</span
                    >
                  </div>
                </article>
                <article
                  class="card"
                  data-href="product.html?slug=heritage-tee"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=800&auto=format&fit=crop"
                      alt="Featured Item 3"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1520975922324-c2e5a62b2398?q=80&w=800&auto=format&fit=crop"
                      alt="Featured Item 3 - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FEATURED ITEM 3</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$72.00 AUD</span
                    >
                  </div>
                </article>
                <article
                  class="card"
                  data-href="product.html?slug=journeys-cap"
                  style="cursor: pointer"
                >
                  <div
                    class="img-wrap"
                    onmouseenter="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='1'}"
                    onmouseleave="var h=this.querySelector('.hover-img'); if(h){h.style.opacity='0'}"
                    style="
                      aspect-ratio: 3/4;
                      overflow: hidden;
                      position: relative;
                      border-radius: 0;
                    "
                  >
                    <img
                      src="https://images.unsplash.com/photo-1520975619016-6f2aeb47b5f4?q=80&w=800&auto=format&fit=crop"
                      alt="Featured Item 4"
                      style="width: 100%; height: 100%; object-fit: cover"
                    />
                    <img
                      class="hover-img"
                      src="https://images.unsplash.com/photo-1520975922324-c2e5a62b2398?q=80&w=800&auto=format&fit=crop"
                      alt="Featured Item 4 - alternate"
                      style="
                        position: absolute;
                        inset: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 180ms ease;
                        pointer-events: none;
                      "
                    />
                  </div>
                  <div
                    class="row mt-8"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                      gap: 6px;
                      margin-top: 8px;
                      font-size: 14px;
                      text-align: center;
                    "
                  >
                    <span
                      style="
                        font-weight: 400;
                        text-transform: uppercase;
                        font-size: 12px;
                      "
                      >FEATURED ITEM 4</span
                    >
                    <span class="price" style="font-weight: 400"
                      >$59.00 AUD</span
                    >
                  </div>
                </article>
              </div>
              <button
                class="ctrl next"
                aria-label="Next"
                onmouseenter="this.style.background='rgba(255,255,255,0.15)'; this.style.borderColor='rgba(255,255,255,0.35)'; this.firstElementChild.style.transform='scale(1.1)'"
                onmouseleave="this.style.background='transparent'; this.style.borderColor='transparent'; this.firstElementChild.style.transform='scale(1)'"
                onmousedown="this.firstElementChild.style.transform='scale(0.95)'"
                onmouseup="this.firstElementChild.style.transform='scale(1.1)'"
                onclick="(function(b){var r=b.parentElement;var t=r&&r.querySelector('.carousel-track');if(!t)return;var f=t.children[0];var s=0;if(f){var rect=f.getBoundingClientRect();var st=getComputedStyle(t);var g=parseFloat(st.columnGap||st.gap||0)||0;s=(rect.width+g)*2;}else{s=t.clientWidth;}t.scrollBy({left:s,behavior:'smooth'});})(this)"
                style="
                  position: absolute;
                  top: 50%;
                  right: 8px;
                  transform: translateY(-50%);
                  display: inline-flex;
                  align-items: center;
                  justify-content: center;
                  background: transparent;
                  border: 1px solid transparent;
                  padding: 0;
                  color: #fff;
                  font-size: 20px;
                  width: 36px;
                  height: 36px;
                  line-height: 1;
                  border-radius: 50%;
                  cursor: pointer;
                  z-index: 2;
                "
              >
                ‚Ä∫
              </button>
            </div>
          </div>
        </div>

        <!-- Join Journey CTA (replaces background hero) -->
        <section
          aria-label="Join Journey"
          style="
            max-width: 980px;
            margin: 44px auto 48px;
            padding: 28px 20px;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            background: #fff;
            text-align: center;
          "
        >
          <div
            class="upper"
            style="
              font-weight: 800;
              font-size: 24px;
              letter-spacing: 0.5px;
              margin: 0 0 8px 0;
              color: #111;
            "
          >
            JOIN JOURNEY
          </div>
          <div
            style="
              width: 64px;
              height: 2px;
              background: #111;
              opacity: 0.1;
              margin: 0 auto 14px;
            "
          ></div>
          <p
            style="
              color: #444;
              font-size: 15px;
              line-height: 1.6;
              margin: 0 0 18px 0;
            "
          >
            Become a member for points, early access and exclusive perks every
            time you shop.
          </p>
          <a
            href="#"
            style="
              display: inline-block;
              width: min(420px, 90%);
              background: #fff;
              color: #111;
              padding: 14px 18px;
              border-radius: 6px;
              text-decoration: none;
              font-weight: 600;
              letter-spacing: 0.3px;
              border: 1px solid #111;
              transition: background 0.15s ease;
            "
            onmouseover="this.style.background='#f7f7f7'"
            onmouseout="this.style.background='#fff'"
          >
            JOIN NOW
          </a>
        </section>
      </section>
    </main>
    <!-- Desktop-only: full-width Recently Viewed, Best Sellers, and Join Journey below the product grid -->
    <section
      id="below-product-sections"
      style="width: 100%; max-width: none; margin: 0; padding: 0"
    ></section>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        try {
          if (window.innerWidth >= 1024) {
            var afterMain = document.querySelector(
              "main.container.section.product"
            );
            var target = document.getElementById("below-product-sections");
            if (!target && afterMain) {
              target = document.createElement("section");
              target.id = "below-product-sections";
              target.setAttribute(
                "style",
                "width:100%;max-width:none;margin:0;padding:0;"
              );
              afterMain.insertAdjacentElement("afterend", target);
            }

            function cloneAndNormalize(el) {
              var c = el.cloneNode(true);
              c.style.margin = "48px 0 0 0";
              c.style.padding = "0";
              // Make carousel containers full-bleed within this section
              var car = c.querySelector(".carousel");
              if (car) {
                car.style.marginLeft = "0";
                car.style.marginRight = "0";
                car.style.width = "100%";
              }
              var track = c.querySelector(".carousel-track");
              if (track) {
                track.style.display = "grid";
                track.style.gridAutoFlow = "row";
                track.style.gridAutoColumns = "initial";
                track.style.gridTemplateColumns = "repeat(4, 1fr)";
                track.style.gap = "16px";
                track.style.overflowX = "visible";
                track.style.scrollSnapType = "none";
              }
              // Ensure 4 cards visible on desktop; if fewer, pad by cloning existing
              try {
                var kids = Array.from(track.children || []);
                if (kids.length > 0 && kids.length < 4) {
                  var base = kids.slice();
                  for (var i = 0; i < 4 - base.length; i++) {
                    track.appendChild(base[i % base.length].cloneNode(true));
                  }
                }
              } catch (e) {}

              return c;
            }

            var rv = document.getElementById("you-also-viewed");
            var bs = document.getElementById("featured-collection");
            var cta = document.querySelector(
              ".p-details section[aria-label='Join Journey']"
            );

            if (target) {
              if (rv) target.appendChild(cloneAndNormalize(rv));
              if (bs) target.appendChild(cloneAndNormalize(bs));
              if (cta) {
                var c = cta.cloneNode(true);
                c.style.maxWidth = "980px";
                c.style.margin = "44px auto 56px";
                c.style.textAlign = "center";
                target.appendChild(c);
              }
            }
          }
        } catch (e) {
          if (console && console.warn) console.warn("layout clone error", e);
        }
      });
    </script>

    <!-- Footer -->
    <footer style="background: #fff; color: #111; margin-top: 0">
      <!-- Main Footer Content -->
      <div style="padding: 48px 0 32px 0">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 16px">
          <!-- Footer Grid -->
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 40px;
              margin-bottom: 40px;
            "
          >
            <!-- Brand Section -->
            <div
              style="
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
              "
            >
              <img
                src="LOGO/1.png"
                alt="Journey Apparel Logo"
                style="height: 120px; margin: 0 auto 20px auto; display: block"
              />
              <p
                style="
                  color: #000;
                  font-size: 14px;
                  line-height: 1.6;
                  margin: 0 0 20px 0;
                  max-width: 280px;
                  text-align: center;
                "
              >
                Premium athletic apparel designed for modern performance.
                Minimal design, maximum impact.
              </p>
              <!-- Social Icons -->
              <div style="display: flex; justify-content: center; gap: 12px">
                <a
                  href="https://www.instagram.com/journeysapparel/"
                  style="
                    width: 40px;
                    height: 40px;
                    background: #f1f1f1;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: #111;
                    text-decoration: none;
                    transition: background 0.2s ease;
                  "
                  onmouseover="this.style.background='#e5e5e5'"
                  onmouseout="this.style.background='#f1f1f1'"
                  >üì∏</a
                >
              </div>
            </div>

            <!-- Customer Care -->

            <div style="text-align: center">
              <h4
                style="
                  font-size: 16px;
                  font-weight: 700;
                  margin: 0 0 20px 0;
                  color: #000;
                "
              >
                Support & Contact
              </h4>
              <div style="display: flex; flex-direction: column; gap: 12px">
                <a
                  href="contact.html"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  >Contact Us</a
                >
                <a
                  href="shipping.html"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  >Shipping Info</a
                >
                <a
                  href="returns.html"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  >Returns & Exchanges</a
                >
                <a
                  href="#size-guide"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  >Size Guide</a
                >
                <a
                  href="policies.html"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  >Policies</a
                >
              </div>
            </div>

            <!-- Company -->
            <div style="text-align: center">
              <h4
                style="
                  font-size: 16px;
                  font-weight: 700;
                  margin: 0 0 20px 0;
                  color: #000;
                "
              >
                Company
              </h4>
              <div style="display: flex; flex-direction: column; gap: 12px">
                <a
                  href="#"
                  style="
                    color: #000;
                    text-decoration: none;
                    font-size: 14px;
                    transition: color 0.2s ease;
                  "
                  onmouseover="this.style.color='#000'"
                  onmouseout="this.style.color='#000'"
                  href="about.html"
                  >About</a
                >
              </div>
            </div>

            <!-- Newsletter -->
            <div style="text-align: center">
              <h4
                style="
                  font-size: 16px;
                  font-weight: 700;
                  margin: 0 0 20px 0;
                  color: #000;
                "
              >
                Stay Connected
              </h4>
              <p style="color: #000; font-size: 14px; margin: 0 0 16px 0">
                Get exclusive access to new drops and member rewards.
              </p>
              <form
                style="
                  display: flex;
                  gap: 8px;
                  max-width: 280px;
                  margin: 0 auto;
                "
              >
                <input
                  type="email"
                  placeholder="Enter your email"
                  required
                  style="
                    flex: 1;
                    padding: 12px 16px;
                    border: 1px solid #444;
                    border-radius: 8px;
                    background: #fff;
                    color: #000;
                    font-size: 14px;
                  "
                />
                <button
                  type="submit"
                  style="
                    padding: 12px 16px;
                    border-radius: 8px;
                    background: #fff;
                    color: #000;
                    border: none;
                    font-weight: 600;
                    cursor: pointer;
                    white-space: nowrap;
                  "
                >
                  Subscribe
                </button>
              </form>
              <p style="color: #000; font-size: 12px; margin: 12px 0 0 0">
                By subscribing, you agree to our Privacy Policy.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div style="border-top: 1px solid #333; padding: 24px 0">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 16px">
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
              text-align: center;
            "
          >
            <!-- Copyright and Links -->
            <div
              style="
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                justify-content: center;
                gap: 24px;
              "
            >
              <span style="color: #000; font-size: 14px"
                >¬© 2025 Journey Apparel. All rights reserved. Prices in
                AUD.</span
              >
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="script.js" defer></script>
    <!-- Premium Size Guide Modal -->
    <div
      id="size-guide-modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      tabindex="-1"
      style="
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        z-index: 1000;
      "
    >
      <div
        style="
          max-width: 980px;
          margin: 32px auto;
          background: #fff;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
        "
      >
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid #eee;
          "
        >
          <div style="display: flex; align-items: center; gap: 10px">
            <span
              style="
                font-size: 18px;
                font-weight: 800;
                letter-spacing: 0.4px;
                color: #111;
              "
              >Size Guide</span
            >
          </div>
          <div style="display: flex; align-items: center; gap: 8px">
            <button
              id="sg-cm"
              type="button"
              aria-pressed="true"
              style="
                padding: 6px 10px;
                border: 1px solid #111;
                background: #111;
                color: #fff;
                border-radius: 999px;
                font-size: 12px;
                cursor: pointer;
              "
            >
              CM
            </button>
            <button
              id="sg-in"
              type="button"
              aria-pressed="false"
              style="
                padding: 6px 10px;
                border: 1px solid #ddd;
                background: #fff;
                color: #111;
                border-radius: 999px;
                font-size: 12px;
                cursor: pointer;
              "
            >
              IN
            </button>
            <button
              id="size-guide-close"
              type="button"
              aria-label="Close"
              style="
                padding: 6px 10px;
                border: 1px solid #ddd;
                background: #fff;
                border-radius: 8px;
                font-size: 18px;
                line-height: 1;
                cursor: pointer;
              "
            >
              √ó
            </button>
          </div>
        </div>
        <div
          style="display: flex; gap: 16px; padding: 16px 20px; flex-wrap: wrap"
        >
          <div style="flex: 1 1 380px; min-width: 300px">
            <div
              style="
                display: flex;
                gap: 8px;
                margin: 0 0 12px 0;
                flex-wrap: wrap;
              "
            >
              <button
                type="button"
                data-sg-tab="heavy-tee"
                aria-pressed="true"
                style="
                  padding: 8px 12px;
                  border: 1px solid #111;
                  background: #111;
                  color: #fff;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Heavy Tee
              </button>
              <button
                type="button"
                data-sg-tab="relax-hoodie"
                aria-pressed="false"
                style="
                  padding: 8px 12px;
                  border: 1px solid #ddd;
                  background: #fff;
                  color: #111;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Relax Hoodie
              </button>

              <button
                type="button"
                data-sg-tab="heavy-hoodie"
                aria-pressed="false"
                style="
                  padding: 8px 12px;
                  border: 1px solid #ddd;
                  background: #fff;
                  color: #111;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Heavy Hoodie
              </button>
              <button
                type="button"
                data-sg-tab="shorts"
                aria-pressed="false"
                style="
                  padding: 8px 12px;
                  border: 1px solid #ddd;
                  background: #fff;
                  color: #111;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Shorts
              </button>
              <button
                type="button"
                data-sg-tab="hats"
                aria-pressed="false"
                style="
                  padding: 8px 12px;
                  border: 1px solid #ddd;
                  background: #fff;
                  color: #111;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Hats
              </button>
            </div>
            <div
              id="sg-chart"
              style="
                border: 1px solid #eee;
                border-radius: 10px;
                overflow: auto;
              "
            >
              <!-- chart renders here -->
            </div>
          </div>
          <div style="flex: 1 1 300px; min-width: 280px; display: none">
            <div style="font-weight: 700; color: #111; margin-bottom: 8px">
              Get your recommended size
            </div>
            <div
              style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px"
            >
              <div style="display: flex; flex-direction: column; gap: 4px">
                <label for="sg-height" style="font-size: 12px; color: #666"
                  >Height</label
                ><input
                  id="sg-height"
                  type="number"
                  inputmode="decimal"
                  placeholder="180"
                  style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                  "
                />
              </div>
              <div style="display: flex; flex-direction: column; gap: 4px">
                <label for="sg-weight" style="font-size: 12px; color: #666"
                  >Weight</label
                ><input
                  id="sg-weight"
                  type="number"
                  inputmode="decimal"
                  placeholder="75"
                  style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                  "
                />
              </div>
              <div style="display: flex; flex-direction: column; gap: 4px">
                <label for="sg-chest" style="font-size: 12px; color: #666"
                  >Chest</label
                ><input
                  id="sg-chest"
                  type="number"
                  inputmode="decimal"
                  placeholder="98"
                  style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                  "
                />
              </div>
              <div style="display: flex; flex-direction: column; gap: 4px">
                <label for="sg-waist" style="font-size: 12px; color: #666"
                  >Waist</label
                ><input
                  id="sg-waist"
                  type="number"
                  inputmode="decimal"
                  placeholder="80"
                  style="
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                  "
                />
              </div>
            </div>
            <div style="margin: 10px 0 6px 0; font-size: 12px; color: #666">
              Fit preference
            </div>
            <div id="sg-fit" style="display: flex; gap: 8px; flex-wrap: wrap">
              <button
                type="button"
                data-fit="snug"
                aria-pressed="false"
                style="
                  padding: 8px 10px;
                  border: 1px solid #ddd;
                  background: #fff;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Snug
              </button>
              <button
                type="button"
                data-fit="classic"
                aria-pressed="true"
                style="
                  padding: 8px 10px;
                  border: 1px solid #111;
                  background: #111;
                  color: #fff;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Classic
              </button>
              <button
                type="button"
                data-fit="relaxed"
                aria-pressed="false"
                style="
                  padding: 8px 10px;
                  border: 1px solid #ddd;
                  background: #fff;
                  border-radius: 999px;
                  font-size: 12px;
                  cursor: pointer;
                "
              >
                Relaxed
              </button>
            </div>
            <div
              id="sg-result"
              style="
                margin: 12px 0;
                padding: 10px;
                border: 1px dashed #ccc;
                border-radius: 8px;
                color: #111;
                font-size: 14px;
              "
            >
              Enter your measurements for a tailored recommendation.
            </div>
            <div style="margin: 12px 0 6px 0; font-weight: 700; color: #111">
              How to measure
            </div>
            <ul
              style="
                margin: 0 0 8px 16px;
                padding: 0;
                color: #666;
                font-size: 12px;
                line-height: 1.5;
              "
            >
              <li>Chest: Measure around fullest part, under arms.</li>
              <li>Waist: Measure at natural waistline.</li>
              <li>Hips (bottoms): Around fullest part of seat.</li>
              <li>Inseam: From crotch to ankle bone.</li>
            </ul>
            <div style="font-size: 12px; color: #777">
              Model is 186cm, 78kg with 98cm chest wearing M (Classic fit).
            </div>
            <div style="display: flex; gap: 8px; margin-top: 12px">
              <button
                id="sg-apply"
                type="button"
                disabled
                style="
                  flex: 1;
                  padding: 10px;
                  border: 1px solid #111;
                  background: #111;
                  color: #fff;
                  border-radius: 8px;
                  font-weight: 700;
                  cursor: not-allowed;
                "
              >
                Use ‚Äì
              </button>
              <button
                id="sg-close-2"
                type="button"
                style="
                  padding: 10px 12px;
                  border: 1px solid #ddd;
                  background: #fff;
                  border-radius: 8px;
                  cursor: pointer;
                "
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      (function () {
        var modal = document.getElementById("size-guide-modal");
        var open = document.getElementById("size-guide-open");
        var close = document.getElementById("size-guide-close");

        var unitBtns = {
          cm: document.getElementById("sg-cm"),
          inch: document.getElementById("sg-in"),
        };

        var chart = document.getElementById("sg-chart");

        var unit = "cm",
          tab = "heavy-tee";
        var DATA = {
          // Tees ‚Äì width x length in cm
          "heavy-tee": [
            ["SML", 51, 71.5],
            ["MED", 55, 75],
            ["LRG", 59, 78.5],
            ["XLG", 63, 82],
            ["2XL", 67, 85.5],
            ["3XL", 71, 87.5],
          ],

          // Hoodies ‚Äì width x length in cm
          "relax-hoodie": [
            ["XSM", 57, 68.5],
            ["SML", 60, 71],
            ["MED", 63, 73.5],
            ["LRG", 66, 76],
            ["XLG", 69, 78.5],
            ["2XL", 72, 81],
            ["3XL", 75, 83.5],
          ],
          "heavy-hoodie": [
            ["XSM", 54, 68],
            ["SML", 57, 70.5],
            ["MED", 60, 73],
            ["LRG", 63, 75.5],
            ["XLG", 66, 78],
            ["2XL", 69, 80.5],
            ["3XL", 72, 83],
          ],

          // Shorts ‚Äì waist / inseam / length in inches
          shorts: [
            ["S", 26.8, 4.1, 15.9],
            ["M", 28.3, 4.3, 16.5],
            ["L", 29.9, 4.5, 17.1],
            ["XL", 31.5, 4.7, 17.7],
            ["XXL", 33.1, 4.9, 18.3],
          ],
        };
        function toIn(v) {
          return Math.round(v / 2.54);
        }
        function toCm(v) {
          return Math.round(v * 2.54);
        }
        function fmtRange(a, b) {
          if (unit === "cm") return a + "‚Äì" + b + " cm";
          return toIn(a) + "‚Äì" + toIn(b) + " in";
        }
        function renderChart() {
          if (tab === "hats") {
            var u = unit === "cm" ? "cm" : "in";
            var circ = unit === "cm" ? 61 : toIn(61);
            var height = unit === "cm" ? 8.5 : toIn(8.5);
            var meta =
              "Journeys Active Cap - 1180 ‚Ä¢ Fabric: 100% Recycled Nylon Body + Mesh ‚Ä¢ Style: Low Profile, Flat Peak, Adjustable Fastener ‚Ä¢ One Size (OS)";
            var html =
              '<div style="padding:8px 10px;color:#555;font-size:12px">' +
              meta +
              "</div>" +
              '<table style="width:100%;border-collapse:separate;border-spacing:0"><thead><tr>' +
              '<th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Measurement</th>' +
              '<th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">One Size (' +
              u +
              ")</th></tr></thead><tbody>" +
              '<tr><td style="padding:10px;color:#111">Circumference</td><td style="padding:10px;color:#111">' +
              circ +
              " " +
              u +
              "</td></tr>" +
              '<tr><td style="padding:10px;color:#111">Height</td><td style="padding:10px;color:#111">' +
              height +
              " " +
              u +
              "</td></tr></tbody></table>";
            chart.innerHTML = html;
            return;
          }
          var meta = "";
          if (tab === "heavy-tee") {
            meta =
              "Heavy Tee ‚Äî 280GSM, 100% cotton. Regular fit. Available up to 3XL.";
          } else if (tab === "heavy-hoodie") {
            meta =
              "Heavy Hoodie ‚Äî 400GSM, 100% cotton fleece. Regular fit. Available up to 3XL.";
          } else if (tab === "relax-hoodie") {
            meta =
              "Relax Hoodie ‚Äî 500GSM, 100% cotton. Relaxed fit. Available up to 3XL.";
          } else if (tab === "shorts") {
            meta =
              "155 Mesh Shorts ‚Äî lightweight, breathable mesh. Black with JOURNEYS print.";
          }
          var html = meta
            ? '<div style="padding:8px 10px;color:#555;font-size:12px">' +
              meta +
              "</div>"
            : "";
          html +=
            '<table style="width:100%;border-collapse:separate;border-spacing:0"><thead><tr>';
          if (tab === "shorts") {
            html +=
              '<th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Size</th><th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Waist (' +
              (unit === "cm" ? "cm" : "in") +
              ')</th><th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Inseam (' +
              (unit === "cm" ? "cm" : "in") +
              ')</th><th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Length (' +
              (unit === "cm" ? "cm" : "in") +
              ")</th>";
          } else {
            html +=
              '<th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Size</th><th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Width (' +
              (unit === "cm" ? "cm" : "in") +
              ')</th><th style="text-align:left;padding:10px;border-bottom:1px solid #eee;color:#777;font-weight:600">Length (' +
              (unit === "cm" ? "cm" : "in") +
              ")</th>";
          }
          html += "</tr></thead><tbody>";
          (DATA[tab] || []).forEach(function (r) {
            var sz = r[0],
              row = "";
            if (tab === "shorts") {
              var waist = r[1],
                inseam = r[2],
                len = r[3];
              if (unit === "cm") {
                waist = toCm(waist);
                inseam = toCm(inseam);
                len = toCm(len);
              }
              row =
                '<td style="padding:10px;color:#111">' +
                sz +
                '</td><td style="padding:10px;color:#111">' +
                waist +
                (unit === "cm" ? " cm" : " in") +
                '</td><td style="padding:10px;color:#111">' +
                inseam +
                (unit === "cm" ? " cm" : " in") +
                '</td><td style="padding:10px;color:#111">' +
                len +
                (unit === "cm" ? " cm" : " in") +
                "</td>";
            } else {
              var w = r[1],
                l = r[2];
              if (unit === "in") {
                w = toIn(w);
                l = toIn(l);
              }
              row =
                '<td style="padding:10px;color:#111">' +
                sz +
                '</td><td style="padding:10px;color:#111">' +
                w +
                (unit === "cm" ? " cm" : " in") +
                '</td><td style="padding:10px;color:#111">' +
                l +
                (unit === "cm" ? " cm" : " in") +
                "</td>";
            }
            html += "<tr>" + row + "</tr>";
          });
          html += "</tbody></table>";
          chart.innerHTML = html;
        }
        function nearestByRange(val, ranges) {
          var best = null,
            bestd = 1e9;
          ranges.forEach(function (r) {
            var mid = (r[1] + r[2]) / 2,
              d = Math.abs(mid - val);
            if (d < bestd) {
              bestd = d;
              best = r[0];
            }
          });
          return best;
        }
        function clampToRange(val, ranges) {
          for (var i = 0; i < ranges.length; i++) {
            if (val >= ranges[i][1] && val <= ranges[i][2]) return ranges[i][0];
          }
          return null;
        }
        function normalizeSizeForList(sz, list) {
          var codes = (list || []).map(function (r) {
            return r[0];
          });
          if (codes.indexOf(sz) !== -1) return sz;
          var hasWordCodes = codes.some(function (c) {
            return ["XSM", "SML", "MED", "LRG", "XLG"].indexOf(c) !== -1;
          });
          if (hasWordCodes) {
            var map1 = { XS: "XSM", S: "SML", M: "MED", L: "LRG", XL: "XLG" };
            if (map1[sz] && codes.indexOf(map1[sz]) !== -1) return map1[sz];
          }
          var map2 = {
            "2XL": "XXL",
            "3XL": "XXXL",
            "4XL": "XXXXL",
            "5XL": "XXXXXL",
          };
          if (map2[sz] && codes.indexOf(map2[sz]) !== -1) return map2[sz];
          return codes[0] || sz;
        }
        function nearestByWaistCm(valCm, list) {
          var best = null,
            bestd = 1e9;
          (list || []).forEach(function (r) {
            var waistIn = r[1];
            var waistCm = waistIn * 2.54;
            var d = Math.abs(waistCm - valCm);
            if (d < bestd) {
              bestd = d;
              best = r[0];
            }
          });
          return best;
        }

        function adjustByFit(sz, list) {
          var idx = list.findIndex(function (r) {
            return r[0] === sz;
          });
          if (idx < 0) return sz;
          if (fit === "snug") idx = Math.max(0, idx - 1);
          if (fit === "relaxed") idx = Math.min(list.length - 1, idx + 1);
          return list[idx][0];
        }
        function parseNum(el) {
          var v = parseFloat(el.value);
          return isNaN(v) ? null : v;
        }
        function recFromHW(h, w) {
          if (h == null || w == null) return "M";
          if (h < 165 && w < 60) return "XS";
          if (h < 172 && w < 68) return "S";
          if (h < 180 && w < 80) return "M";
          if (h < 188 && w < 92) return "L";
          if (w < 105) return "XL";
          return "2XL";
        }
        function recommend() {
          var h = parseNum(inputs.h),
            w = parseNum(inputs.w),
            c = parseNum(inputs.c),
            t = parseNum(inputs.t);
          if (unit === "in") {
            if (h != null) h = Math.round(h * 2.54);
            if (c != null) c = Math.round(c * 2.54);
            if (t != null) t = Math.round(t * 2.54);
          }
          var base = null;
          if (tab === "shorts") {
            if (t != null) {
              base = nearestByWaistCm(t, DATA.shorts);
            }
          } else if (
            tab !== "heavy-tee" &&
            tab !== "relax-hoodie" &&
            tab !== "heavy-hoodie"
          ) {
            if (c != null) {
              base = clampToRange(c, DATA[tab]) || nearestByRange(c, DATA[tab]);
            }
          }
          if (!base) base = recFromHW(h, w);
          var norm = normalizeSizeForList(base, DATA[tab] || DATA["heavy-tee"]);
          rec = adjustByFit(norm, DATA[tab] || DATA["heavy-tee"]);
          result.textContent =
            "We recommend: " +
            rec +
            " (" +
            fit.charAt(0).toUpperCase() +
            fit.slice(1) +
            " fit)";
          apply.textContent = "Use " + rec;
          apply.disabled = false;
          apply.style.cursor = "pointer";
          apply.style.opacity = "1";
          renderChart();
        }
        function openModal(e) {
          e && e.preventDefault();
          modal.style.display = "block";
          modal.setAttribute("aria-hidden", "false");
          renderChart();
          setTimeout(function () {
            close.focus();
          }, 0);
        }
        function closeModal() {
          modal.style.display = "none";
          modal.setAttribute("aria-hidden", "true");
        }
        open && open.addEventListener("click", openModal);
        close && close.addEventListener("click", closeModal);
        modal.addEventListener("click", function (e) {
          if (e.target === modal) closeModal();
        });
        document.addEventListener("keydown", function (e) {
          if (modal.style.display === "block" && e.key === "Escape")
            closeModal();
        });
        // Expose global opener and enable hash trigger
        window.openSizeGuide = openModal;
        if (location.hash === "#size-guide") {
          openModal();
        }
        window.addEventListener("hashchange", function () {
          if (location.hash === "#size-guide") openModal();
        });
        unitBtns.cm.addEventListener("click", function () {
          unit = "cm";
          unitBtns.cm.style.background = "#111";
          unitBtns.cm.style.color = "#fff";
          unitBtns.cm.style.borderColor = "#111";
          unitBtns.inch.style.background = "#fff";
          unitBtns.inch.style.color = "#111";
          unitBtns.inch.style.borderColor = "#ddd";
          renderChart();
        });
        unitBtns.inch.addEventListener("click", function () {
          unit = "in";
          unitBtns.inch.style.background = "#111";
          unitBtns.inch.style.color = "#fff";
          unitBtns.inch.style.borderColor = "#111";
          unitBtns.cm.style.background = "#fff";
          unitBtns.cm.style.color = "#111";
          unitBtns.cm.style.borderColor = "#ddd";
          renderChart();
        });

        document.querySelectorAll("[data-sg-tab]").forEach(function (b) {
          b.addEventListener("click", function () {
            document.querySelectorAll("[data-sg-tab]").forEach(function (x) {
              x.style.background = "#fff";
              x.style.color = "#111";
              x.style.borderColor = "#ddd";
              x.setAttribute("aria-pressed", "false");
            });
            b.style.background = "#111";
            b.style.color = "#fff";
            b.style.borderColor = "#111";
            b.setAttribute("aria-pressed", "true");
            tab = b.getAttribute("data-sg-tab");
            renderChart();
          });
        });
      })();
    </script>
  </body>
</html>
